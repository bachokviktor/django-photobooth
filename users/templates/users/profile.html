{% extends "base.html" %}

{% block title %}
  {{ profile_user.username }}
{% endblock %}

{% block content %}
  <div class="container">
    <h2>{{ profile_user.username }} {% if profile_user == user %}(you){% endif %}</h2>
    {% if profile_user.bio %}
      <p>{{ profile_user.bio }}</p>
    {% else %}
      <p>No bio.</p>
    {% endif %}
    <p>Followers: {{ profile_user.followers.all.count }} | Following: {{ profile_user.following.all.count }}</p>
    {% if user.is_authenticated and profile_user != user %}
      {% if profile_user in user.following.all %}
	<form action="{% url 'users:unfollow' username=profile_user.username %}" method="post">
	  {% csrf_token %}
	  <button class="btn btn-primary" type="submit">Unfollow</button>
	</form>
      {% else %}
	<form action="{% url 'users:follow' username=profile_user.username %}" method="post">
	  {% csrf_token %}
	  <button class="btn btn-primary" type="submit">Follow</button>
	</form>
      {% endif %}

      {% if profile_user in user.followers.all %}
	<form action="{% url 'users:remove_follower' username=profile_user.username %}" method="post">
	  {% csrf_token %}
	  <button class="btn btn-danger" type="submit">Remove follower</button>
	</form>
      {% endif %}
    {% elif user.is_authenticated and profile_user == user %}
      <a class="btn btn-primary" href="{% url 'users:edit_profile' %}">Edit profile</a>
    {% endif %}
  </div>
{% endblock %}
